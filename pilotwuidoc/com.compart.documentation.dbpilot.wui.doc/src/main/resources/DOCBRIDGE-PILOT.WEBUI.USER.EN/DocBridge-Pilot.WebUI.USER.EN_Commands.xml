<?xml version="1.0" encoding="utf-8"?>
<?xml-model href="http://www.oasis-open.org/docbook/xml/5.1/rng/docbook.rng" schematypens="http://relaxng.org/ns/structure/1.0"?>
<?xml-model href="../../../../../../formatter/com.compart.documentation.formatter/resources/schematron/cpdocbook.sch" type="application/xml" schematypens="http://purl.oclc.org/dsdl/schematron"?>
<!DOCTYPE book [
<!ENTITY % compartentities SYSTEM "../../../../../../formatter/com.compart.documentation.formatter/resources/entities/entities.ent">
%compartentities;
]>
<chapter xml:id="db_pil_wui_commandsView" xmlns="http://docbook.org/ns/docbook"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink"
    version="5.1" xml:lang="en-US">
    <title>Working With Commands</title>
    <para>You can create and manage commands of different types. The commands are referenced by applications (for more information on applications, see <xref
            linkend="db_pil_wui_applicationsView"/>). Depending on the command type, you can define different configuration settings and parameters.</para>
    <para>The following actions are supported in the <guilabel>Commands</guilabel> view:</para>
    <itemizedlist>
        <listitem>
            <para><xref linkend="create_command"/></para>
        </listitem>
        <listitem>
            <para><xref linkend="display_commands"/></para>
        </listitem>
        <listitem>
            <para><xref linkend="display_commandDetails"/></para>
        </listitem>
        <listitem>
            <para><xref linkend="modify_command"/></para>
        </listitem><!--<listitem>
            <para><xref linkend="multi_edit_commands"/></para>
        </listitem>--><listitem>
            <para><xref linkend="delete_commands"/></para>
        </listitem>
    </itemizedlist>
    <sect1 xml:id="create_command"><?dbhtml filename="SearchCommandsView.html" ?><title>Defining a Command</title>
        <para>You can define a new command. You can configure the desired properties directly in the overview table.</para>
        <para>Proceed as follows to create a new command.</para>
        <procedure>
            <step>
                <para>Go to the <guilabel>Commands</guilabel> view.</para>
            </step>
            <step>
                <para>In the navigation bar of the web interface, click <inlinemediaobject><alt>Create Button</alt><imageobject>
                            <imagedata fileref="images/btn_add.png" align="left" format="PNG"
                                scalefit="1"/>
                        </imageobject></inlinemediaobject> (Create).</para>
                <result>
                    <para>A new entry with empty fields is created in the overview table. The <guilabel>ID</guilabel> field contains mandatory information and is therefore highlighted in red (marked as incorrect) while it does not contain a valid entry.</para>
                </result>
            </step>
            <step>
                <para>Enter a name for the new command in the <guilabel>ID</guilabel> field.</para>
            </step>
            <step>
                <para>In the <guilabel>Command Type</guilabel> field, select the desired command type from the dropdown list (for more information about supported command types, see <xref linkend="display_commands"/>).</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the desired path to the working directory in the <guilabel>Working Directory</guilabel> field. Before executing the program this directory is activated.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the path to the directory where the executable file (of the external application) is located in the <guilabel>Program path</guilabel> field.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the name of the executable file (without the file extension) in the <guilabel>Program name</guilabel> field.</para>
            </step>
            <step>
                <para>If you selected the type <guilabel>external</guilabel>, specify in the <guilabel>Use Return Code</guilabel> field whether the command should generate an exception  (value <code>false</code>) or display a return code not equal to 0 (value <code>true</code>).</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, in the <guilabel>Include Console</guilabel> field, specify whether messages about the progress of the external application are to be included in the <productname>&dbpi;</productname> log and trace files. The default value is <code>false</code>. If you set the value to <code>true</code>, the standard output (stdout/stderr) of the external application is included in the <productname>&dbpi;</productname> log and trace files.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>java</guilabel>, specify the Java class of the executor in the <guilabel>Command Class</guilabel> field.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>java</guilabel>, in the <guilabel>Command Configuration</guilabel> field, specify the reference ID to the table corresponding to the command type, in which the Before command is specified in more detail.</para>
            </step>
            <step>
                <para>If you selected the type <guilabel>script</guilabel>, specify the script language in which the command was created in the <guilabel>Language</guilabel> field.</para>
            </step>
            <step>
                <para>If you selected the <guilabel>script</guilabel> type, in the <guilabel>File</guilabel> field, enter the name of the external file that contains the script command.</para>
            </step>
            <step>
                <stepalternatives>
                    <step>
                        <para>Click <inlinemediaobject><alt>Save button</alt><imageobject>
                                <imagedata fileref="images/btn_save.png" align="left"
                                    format="PNG" scalefit="1"/>
                            </imageobject></inlinemediaobject> (Save) to save the new command and exit the editing mode.</para>
                        <result>
                            <para>The editing mode is terminated and the new command is displayed in the overview table.</para>
                        </result>
                    </step>
                    <step>
                        <para>Click <inlinemediaobject><alt>Cancel button</alt><imageobject>
                                <imagedata fileref="images/btn_cancel.png" align="left"
                                    format="PNG" scalefit="1"/>
                            </imageobject></inlinemediaobject> (Cancel) to cancel the creation of the command and exit the edit mode without saving the command.</para>
                    </step>
                </stepalternatives>
            </step>           
        </procedure>
    </sect1>
    <sect1 xml:id="display_commands">
        <title>Listing Commands</title>
        <para>You can display an overview of the configured commands in the workspace of the <guilabel>Commands</guilabel> view.</para>
        <mediaobject><alt>Screenshot Commands view</alt><imageobject>
                <imagedata fileref="images/scr_CommandsView.png" width="14cm"/>
            </imageobject>
        </mediaobject>
        <para>The overview table displays the following information for each configured command by default:</para>
        <variablelist>
            <varlistentry>
                <term><guilabel>ID</guilabel></term>
                <listitem>
                    <para>The unique identifier of the command.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Command type</guilabel></term>
                <listitem>
                    <para>The following types are currently supported for commands:</para>
                    <itemizedlist>
                        <listitem>
                            <para><code>external</code></para>
                            <para>This command type describes an external program.</para>
                        </listitem>
                        <listitem>
                            <para><code>java</code></para>
                            <para>This command type describes a Java command.</para>
                        </listitem>
                        <listitem>
                            <para><code>script</code></para>
                            <para>This type of command describes a command in a script language. Currently the script languages JavaScript and Groovy are supported.</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Language</guilabel></term>
                <listitem>
                    <para>The script language used to create the command. This information is only available for commands of type <guilabel>script</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>File</guilabel></term>
                <listitem>
                    <para>Name of the external file containing the script command. This information is only available for commands of type <guilabel>script</guilabel>.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </sect1>
    <sect1 xml:id="display_commandDetails">
        <title>Displaying Command Details</title>
        <para>When you select a command in the summary table, the information about the selected command is displayed in the details pane.</para>
        <mediaobject><alt>Commands view with details pane</alt><imageobject>
                <imagedata fileref="images/scr_CommandsViewDetails.png" align="left" width="15cm"
                    format="PNG"/>
            </imageobject>
        </mediaobject>
        <para>Compared to the overview table, the details pane contains more information. The following information is currently available in the details view:</para>
        <variablelist>
            <varlistentry>
                <term><guilabel>ID</guilabel></term>
                <listitem>
                    <para>The unique identifier of the command.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Command type</guilabel></term>
                <listitem>
                    <para>The following types are currently supported for commands:</para>
                    <itemizedlist>
                        <listitem>
                            <para><code>external</code></para>
                            <para>This command type describes an external program.</para>
                        </listitem>
                        <listitem>
                            <para><code>java</code></para>
                            <para>This command type describes a Java command.</para>
                        </listitem>
                        <listitem>
                            <para><code>script</code></para>
                            <para>This type of command describes a command in a script language. Currently the script languages JavaScript and Groovy are supported.</para>
                        </listitem>
                    </itemizedlist>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Command class</guilabel></term>
                <listitem>
                    <para>Java class of executor. This information is only available for commands of type <guilabel>java</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Command configuration</guilabel></term>
                <listitem>
                    <para>Reference to table that relates to the command type where the Before command is described in detail</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Working directory</guilabel></term>
                <listitem>
                    <para>Working directory of the external program. Before executing the program this directory is activated. This information is only available for commands of type <guilabel>external</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Program path</guilabel></term>
                <listitem>
                    <para>Path to the directory where the executable file (of the external application) is stored. This information is only available for commands of type <guilabel>external</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Program name</guilabel></term>
                <listitem>
                    <para>Name of the executable file (without file extension). This information is only available for commands of type <guilabel>external</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Use return code</guilabel></term>
                <listitem>
                    <para>Specifies whether the command should generate an exception or output a return code not equal to 0. The default value is <code>false</code>. With this value, an exception will be thrown. If you set the value to <code>true</code>, the return code for the result of the external application is returned. This information is only available for commands of type <guilabel>external</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Include console</guilabel></term>
                <listitem>
                    <para>Specifies whether messages about the progress of the external application should be displayed in the <productname>&dbpi;</productname> log and trace files. The default value is <code>false</code>. If you set the value to <code>true</code>, the standard output (stdout/stderr) of the external application is included in the <productname>&dbpi;</productname> log and trace files. This information is only available for commands of type <guilabel>external</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Position</guilabel></term>
                <listitem>
                    <para>Internally used field, is currently not filled.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Parameter</guilabel></term>
                <listitem>
                    <para>You can pass parameters to the external application or the Java class by creating parameter definitions. This information is only available for commands of type <guilabel>external</guilabel> or <guilabel>java</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>Language</guilabel></term>
                <listitem>
                    <para>The script language used to create the command. This information is only available for commands of type <guilabel>script</guilabel>.</para>
                </listitem>
            </varlistentry>
            <varlistentry>
                <term><guilabel>File</guilabel></term>
                <listitem>
                    <para>Name of the external file containing the script command. This information is only available for commands of type <guilabel>script</guilabel>.</para>
                </listitem>
            </varlistentry>
        </variablelist>
    </sect1>
    <sect1 xml:id="modify_command">
        <title>Modifying a Command</title>
        <para>You can edit the command properties.</para>
        <note>
            <para>Please keep in mind that you can edit different properties depending on the command type.</para>
        </note>
        <para>Proceed as follows to modify the properties of an existing command:</para>
        <procedure>
            <step>
                <para>Go to the <guilabel>Commands</guilabel> view.</para>
            </step>
            <step>
                <para>Double-click the desired row in the overview table.</para>
                <result>
                    <para>The entry switches to editing mode.</para>
                </result>
            </step>
            <step>
                <para>In the <guilabel>Command Type</guilabel> field, select the desired command type from the dropdown list (for more information about supported command types, see <xref linkend="display_commands"/>).</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the desired path to the working directory in the <guilabel>Working Directory</guilabel> field. Before executing the program this directory is activated.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the path to the directory where the executable file (of the external application) is located in the <guilabel>Program path</guilabel> field.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, enter the name of the executable file (without the file extension) in the <guilabel>Program name</guilabel> field.</para>
            </step>
            <step>
                <para>If you selected the type <guilabel>external</guilabel>, specify in the <guilabel>Use Return Code</guilabel> field whether the command should generate an exception  (value <code>false</code>) or display a return code not equal to 0 (value <code>true</code>).</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>external</guilabel>, in the <guilabel>Include Console</guilabel> field, specify whether messages about the progress of the external application are to be included in the <productname>&dbpi;</productname> log and trace files. The default value is <code>false</code>. If you set the value to <code>true</code>, the standard output (stdout/stderr) of the external application is included in the <productname>&dbpi;</productname> log and trace files.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>java</guilabel>, specify the Java class of the executor in the <guilabel>Command Class</guilabel> field.</para>
            </step>
            <step>
                <para>If you have selected the type <guilabel>java</guilabel>, in the <guilabel>Command Configuration</guilabel> field, specify the reference ID to the table corresponding to the command type, in which the Before command is specified in more detail.</para>
            </step>
            <step>
                <para>If you selected the type <guilabel>script</guilabel>, specify the script language in which the command was created in the <guilabel>Language</guilabel> field.</para>
            </step>
            <step>
                <para>If you selected the <guilabel>script</guilabel> type, in the <guilabel>File</guilabel> field, enter the name of the external file that contains the script command.</para>
            </step>
            <step>
                <stepalternatives>
                    <step>
                        <para>Click <inlinemediaobject><alt>Save button</alt><imageobject>
                                <imagedata fileref="images/btn_save.png" align="left"
                                    format="PNG" scalefit="1"/>
                            </imageobject></inlinemediaobject> (Save) to save the modified command and exit the editing mode.</para>
                        <result>
                            <para>The editing mode is terminated and the command is displayed with the new values in the overview table.</para>
                        </result>
                    </step>
                    <step>
                        <para>Click <inlinemediaobject><alt>Cancel button</alt><imageobject>
                                <imagedata fileref="images/btn_cancel.png" align="left"
                                    format="PNG" scalefit="1"/>
                            </imageobject></inlinemediaobject> (Cancel) to cancel editing the command and exit the editing mode without saving the changes.</para>
                    </step>
                </stepalternatives>
            </step>           
        </procedure>
    </sect1><!--<sect1 xml:id="multi_edit_commands">
        <title>Mehrere Befehle bearbeiten</title>
        <para>Mithilfe dieser Aktion können Sie ausgewählte Werte für mehrere Befehle in einem Schritt
            bearbeiten.</para>
        <note>
            <para>Bitte beachten Sie, dass Sie mit dieser Funktion, die gleichen Werte für alle
                ausgewählten Befehle definieren.</para>
        </note>
        <para>Gehen Sie wie folgt vor, um die Eigenschaften der ausgewählten Befehle zu
            bearbeiten.</para>
        <procedure>
            <step>
                <para>Wählen Sie mindestens zwei Befehle aus der Übersichtstabelle.</para>
            </step>
            <step>
                <para>Klicken Sie in der Navigationsleiste der Ansicht auf die Schaltfläche <inlinemediaobject>
                    <alt>Schaltfläche Bearbeiten</alt>
                    <imageobject>
                        <imagedata fileref="images/btn_edit.png" align="left" format="PNG"
                            scalefit="1"/>
                    </imageobject>
                </inlinemediaobject> (Bearbeiten).</para>
                <result>
                    <para>Das Dialogfenster <guilabel>Bearbeiten</guilabel> wird geöffnet.</para>
                </result>
            </step>
            <step>
                <para>Setzen Sie ein Häkchen in die Checkbox vor jedem Wert, den Sie für alle
                    ausgewählten Befehle ändern wollen.</para>
            </step>
            <step>
                <para>Geben Sie im Feld <guilabel>Befehlstyp</guilabel> den gewünschten Befehlstyp
                    an (für weitere Informationen zu den unterstützten
                    Befehlsttypen, siehe <xref linkend="display_commands"/>).</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>external</guilabel> angegeben haben, geben Sie im
                    Feld <guilabel>Arbeitsverzeichnis</guilabel> den gewünschten Pfad zum
                    Arbeitsverzeichnis an. In dieses Verzeichnis wird vor Ausführung des Programms
                    gewechselt.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>external</guilabel> angegeben haben, geben Sie im
                    Feld <guilabel>Programmpfad</guilabel> den Pfad zum Verzeichnis an, in dem die
                    ausführbare Datei (der externen Anwendung) liegt.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>external</guilabel> angegeben haben, geben Sie im
                    Feld <guilabel>Programmname</guilabel> den Namen der ausführbaren Datei (ohne
                    Dateiendung) an.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>external</guilabel> angegeben haben, geben Sie im
                    Feld <guilabel>Return Code verwenden</guilabel> an, ob der Befehl einen
                    Ausnahmefehler generieren (Wert <code>false</code>) oder einen Returncode
                    ungleich 0 ausgeben soll (Wert <code>true</code>).</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>external</guilabel> angegeben haben, geben Sie im
                    Feld <guilabel>Konsole einbinden</guilabel> an, ob Nachrichten zum Fortschritt
                    der externen Anwendung in den <productname>&dbpi;</productname> Log- und
                    Trace-Dateien ausgegeben werden sollen. Der Standardwert ist <code>false</code>.
                    Wenn Sie den Wert auf <code>true</code> setzen, wird die Standardausgabe
                    (stdout/stderr) des externen Programms in die <productname>&dbpi;</productname>
                    Log- und Trace-Dateien inkludiert.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>java</guilabel> angegeben haben, geben Sie im Feld
                    <guilabel>Befehlsklasse</guilabel> die Java-Klasse des Executors an.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>java</guilabel> ausgewählt haben, geben Sie im Feld
                    <guilabel>Befehlskonfiguration</guilabel> die Verweis-ID auf die dem
                    Befehlstyp entsprechende Tabelle an, in der der Before-Befehl näher bestimmt
                    ist.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>script</guilabel> angegeben haben, geben Sie im Feld
                    <guilabel>Sprache</guilabel> die Skriptsprache an, in der der Befehl erstellt wurde.</para>
            </step>
            <step>
                <para>Wenn Sie den Typ <guilabel>script</guilabel> angegeben haben, geben Sie im Feld
                    <guilabel>Datei</guilabel> den Namen der externen Datei, die den Skriptbefehl enthält.</para>
            </step>
            <step>
                <stepalternatives>
                    <step>
                        <para>Klicken Sie auf <guibutton>Bestätigen</guibutton>, um die Änderungen
                            für die ausgewählten Befehle zu speichern und das
                            Dialogfenster zu schließen.</para>
                        <result>
                            <para>Die geänderten Einstellungen werden für die ausgewählten Jobs in
                                der Übersichtstabelle und im Detailbereich angezeigt.</para>
                        </result>
                    </step>
                    <step>
                        <para>Klicken Sie auf <guibutton>Abbrechen</guibutton>, um das Dialogfenster
                            zu schließen ohne die Änderungen zu speichern.</para>
                    </step>
                </stepalternatives>
            </step>           
        </procedure>
    </sect1>
    
    --><sect1 xml:id="delete_commands">
        <title>Deleting Commands</title>
        <para>Use this action to delete a single command or multiple commands. Proceed as follows to delete existing commands:</para>
        <procedure>
            <step>
                <para>Go to the <guilabel>Commands</guilabel> view.</para>
            </step>
            <step>
                <para>Select at least one command from the overview table.</para>
            </step>
            <step>
                <para>In the navigation bar of the view, click <inlinemediaobject><alt>Button Delete</alt><imageobject>
                            <imagedata fileref="images/btn_delete.png" scalefit="1"/>
                        </imageobject></inlinemediaobject> (Delete).</para>
                <result>
                    <para>The confirmation dialog <guilabel>Delete Commands</guilabel> opens.</para>
                </result>
            </step>
            <step>
                <stepalternatives>
                    <step>
                        <para>In the confirmation dialog <guilabel>Delete Commands</guilabel>, click <guibutton>OK</guibutton> to delete the selected command (or commands).</para>
                    </step>
                    <step>
                        <para>In the confirmation dialog <guilabel>Delete Commands</guilabel>, click <guibutton>Cancel</guibutton> to close the dialog <emphasis>without</emphasis> deleting the selected command(s).</para>
                    </step>
                </stepalternatives>
                <result>
                    <para>If the commands have been successfully deleted, a success message is displayed.</para>
                    <para>If the commands could not be deleted, a corresponding error message is displayed.</para>
                </result>
            </step>
        </procedure>
    </sect1>
</chapter>